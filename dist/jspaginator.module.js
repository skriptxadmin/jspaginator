function t(e,s="",i="",a={}){let n=document.createElement(e);for(let t in a)n.setAttribute(t,a[t]);let r=i.trim();return r&&r.split(" ").map(t=>t.trim()).filter(t=>t).forEach(t=>{n.classList.add(t)}),n.innerHTML=s,n}function e(s,i,a={}){let n,r,l;return n=t("li","",a?.li),r=t("button","",`page ${i} ${a?.button?a.button:""}`),l=t("span",s,a?.span),r.append(l),n.append(r),n}function s(t,s,i){if(t?.html?.hasOwnProperty(i)){if(t.html[i]){let s=t?.html[i]?.toString().trim();return s?e(s,i,t.classNames):null}return null}return e(s,i,t.classNames)}function i(t,e){t.classList.contains("number")||t.closest("li").classList.add("disabled"),t.setAttribute("disabled",!0),t.classList.add(e)}Object.defineProperty({},"Paginator",{get:()=>a,set:void 0,enumerable:!0,configurable:!0});class a{get filtered(){return this.config.filtered||0}get total(){return this.config.totalItems||this.items$?.length}get itemsPerPage(){return this.config?.itemsPerPage||10}get totalPages(){return Math.ceil(this.total/this.itemsPerPage)}get start(){return(this.currentPage-1)*this.itemsPerPage}get end(){let t=this.start+this.itemsPerPage;return t>this.total&&(t=this.total),t}get activeClass(){return this.config?.classNames?.active||"active"}get maxNumbers(){return this.config?.html?.maxNumbers?parseInt(this.config?.html?.maxNumbers):5}constructor(t,e){if(this.currentPage=1,this.pageSelected=this.currentPage,!t?.length){console.error("The elements to be paginated is empty");return}if(!e.paginator$){console.error("The paginator wrapping element is empty");return}this.items$=t,this.paginator$=e.paginator$,this.config=e,this.config.currentPage&&(this.currentPage=this.config.currentPage,this.pageSelected=this.currentPage),this.paginator$.innerHTML="",this.hideItems(),this.renderInfoText(),this.renderNav()}renderInfoText(){if(!this.config.infoText)return;let e=this.paginator$.querySelector(".skriptx--paginator-info-text");e||(e=t("div","","skriptx--paginator-info-text"),this.paginator$.append(e));let s=this.config.infoText.replace(":start",(this.start+1).toString()).replace(":end",this.end.toString()).replace(":filtered",this.filtered.toString()).replace(":total",this.total.toString());e.innerHTML=s}hideItems(){this.config.server||this.items$.forEach((t,e)=>{t.style.display="",(e<this.start||e>=this.end)&&(t.style.display="none")})}renderNav(){let e;let i=t("ul","",this.config?.classNames?.ul);(e=s(this.config,"&laquo;","first"))&&i.append(e),(e=s(this.config,"&lsaquo;","prev"))&&i.append(e),this.config.html?.hasOwnProperty("number")?this.config.html.number&&this.renderNumber(i):this.renderNumber(i),(e=s(this.config,"&rsaquo;","next"))&&i.append(e),(e=s(this.config,"&raquo;","last"))&&i.append(e);let a=t("nav","",this.config?.classNames?.nav);a.append(i),this.paginator$.append(a),this.captureNavButtons(),this.captureSelect(),this.disableButtons()}captureSelect(){let t=this.paginator$.querySelector("nav"),e=t?.querySelector("select");e&&(this.updateSelect(),e.addEventListener("change",()=>{this.pageSelected=parseInt(e.value),this.onPageChange()}))}captureNavButtons(){let t=this.paginator$.querySelector("nav"),e=t?.querySelectorAll("button");e?.length&&e.forEach(t=>{t.addEventListener("click",()=>{t.classList.contains("number")&&(this.pageSelected=parseInt(t.innerText)),t.classList.contains("first")&&(this.pageSelected=1),t.classList.contains("last")&&(this.pageSelected=parseInt(this.totalPages)),t.classList.contains("prev")&&(this.pageSelected=this.currentPage-1),t.classList.contains("next")&&(this.pageSelected=this.currentPage+1),this.pageSelected<1&&(this.pageSelected=1),this.pageSelected>this.totalPages&&(this.pageSelected=this.totalPages),this.onPageChange()})})}onPageChange(){if(this.emitOnPageChange(),this.config.server){this.paginator$.innerHTML="";return}this.currentPage=this.pageSelected,this.renderInfoText(),this.hideItems(),this.disableButtons(),this.updateSelect()}updateSelect(){let t=this.paginator$.querySelector("nav"),e=t?.querySelector("select");e&&e.value!=this.currentPage.toString()&&(e.value=this.currentPage)}emitOnPageChange(){this.config.hasOwnProperty("onPageChange")&&"function"==typeof this.config.onPageChange&&this.config.onPageChange({prev:this.currentPage,now:this.pageSelected})}renderNumber(s){let i;if(this.totalPages>this.maxNumbers){let e=t("select","",this.config?.classNames?.select);for(let s=1;s<=this.totalPages;s++){let i=t("option",s,"",{value:s});e.append(i)}let i=t("li"),a=t("div","",this.config?.classNames?.selectDiv);a.append(e),i.append(a),s.append(i)}else for(let t=1;t<=this.totalPages;t++)i=e(t,"number",this.config.classNames),s.append(i)}disableButtons(){let t=this.paginator$.querySelector("nav");(t?.querySelectorAll("button")).forEach(t=>{var e;e=this.activeClass,t.classList.contains("number")||t.closest("li").classList.remove("disabled"),t.removeAttribute("disabled"),t.classList.remove(e),t.classList.contains("number")&&parseInt(t.innerText)==this.currentPage&&i(t,this.activeClass),(t.classList.contains("first")||t.classList.contains("prev"))&&1==this.currentPage&&i(t,this.activeClass),(t.classList.contains("last")||t.classList.contains("next"))&&this.currentPage==this.totalPages&&i(t,this.activeClass)})}}export{a as Paginator};
//# sourceMappingURL=jspaginator.module.js.map
